# serverless plugins
serverless-iam-roles-per-function:
  defaultInherit: true

# serverless general config
accountId: 820389075840
basename: ${self:service}-${self:provider.stage}
sesRegion: us-east-1
appDomain: fullbpo.app

httpCors:
  origin: '*'
  headers:
    - Content-Type
    - Cache-Control
    - X-Api-Key
  allowCredentials: false
httpPrivate: false
functionsWarmUpScheduleEvent:
  description: Function warm up each five minutes
  rate: rate(5 minutes)
  enabled: ${self:custom.functionsWarmUpScheduleEventEnabled.${self:provider.stage}}
  input: '{"warmUp":true}'

# serverless config by environment
region:
  dev: us-east-1
  prd: sa-east-1
zones:
  dev:
    - ${self:custom.region.${self:provider.stage}}a
  prd:
    - ${self:custom.region.${self:provider.stage}}a
    - ${self:custom.region.${self:provider.stage}}b
functionsWarmUpScheduleEventEnabled:
  dev: false
  prd: false
ingestionDispatcherSchedule1:
  dev:
    rate: cron(0 2 ? * * *) # everyday at 02:00 UTC (23:00 BR)
    enabled: true
  prd:
    rate: cron(0 3 ? * * *) # everyday at 03:00 UTC (00:00 BR)
    enabled: true
ingestionDispatcherSchedule2:
  dev:
    rate: cron(0 14 ? * * *) # everyday at 14:00 UTC (11:00 BR)
    enabled: false
  prd:
    rate: cron(0 15 ? * * *) # everyday at 15:00 UTC (12:00 BR)
    enabled: true
ingestionDispatcherSchedule3:
  dev:
    rate: cron(0 20 ? * * *) # everyday at 20:00 UTC (17:00 BR)
    enabled: false
  prd:
    rate: cron(0 21 ? * * *) # everyday at 21:00 UTC (18:00 BR)
    enabled: true
dataExport:
  dev:
    memorySize: 4096
  prd:
    memorySize: 3008

# application environment variables
env:
  MONGODB_URI:
    dev: mongodb+srv://fullbpo:5EexHwwb7XcTxcTB@full-bpo-dev.vkvc7.mongodb.net/?retryWrites=true&w=majority
    prd: mongodb+srv://fullbpo:5EexHwwb7XcTxcTB@full-bpo-prd.5cxohkn.mongodb.net/?retryWrites=true&w=majority
  ERROR_NOTIFICATION_RECIPIENT_ADDRESS:
    dev: ikaromarlon@gmail.com
    prd: pedro.magnago@fullbpo.com
  ERROR_NOTIFICATION_RECIPIENT_ADDRESS_COPY:
    dev: ikaromarlon@gmail.com
    prd: ''
  WAIT_SECONDS_BEFORE_NEXT_OMIE_PAGE_REQUEST:
    dev: 0
    prd: 0
  FLAG_UPDATE_EMPTY_RECORDS:
    dev: false
    prd: false
  FLAG_LOG_EACH_OMIE_ERROR:
    dev: false
    prd: false